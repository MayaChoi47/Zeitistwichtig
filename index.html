<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zeit ist wichtig!</title>
    <!-- manifest 파일 연결 -->
    <link rel="manifest" href="manifest.json">
    <!-- Tailwind CSS를 위한 스크립트 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        /* 이미지를 6x3 바둑판 모양으로 수정 */
        body {
            font-family: 'Inter', sans-serif;
            background-image: url('https://i.namu.wiki/i/vzlCKTekAQcSoyZNmBfBLmsReUgao6-m9iwj4ziqa7s-RhQjUIgbmto0-Rq4Ze2kKfQPmHjtd1gzJAlxkY6egrzfhtL-KCCVqmKCCK1xIxcfJid-5shZu8kdQ-_Ao0O4oEgDyz3JZq7p4FQF63KRBQ.webp');
            background-size: 16.6666% 33.3333%; /* 이미지를 가로 1/6, 세로 1/3 크기로 설정 */
            background-repeat: repeat; /* 이미지를 반복합니다 */
            background-position: center;
            background-attachment: fixed; /* 스크롤해도 배경 이미지가 고정됩니다 */
        }
        
        /* Custom CSS for a clean look */
        .glass-effect {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="glass-effect rounded-3xl shadow-2xl p-8 w-full max-w-md text-white text-center">
        <!-- 앱 제목 -->
        <h1 class="text-3xl sm:text-4xl font-bold mb-4">Zeit ist wichtig!</h1>
        <p class="text-sm sm:text-base opacity-80 mb-6">고등학생처럼 규칙적인 생활을 도와드립니다!</p>
        
        <!-- 현재 시간을 보여주는 영역 -->
        <div class="bg-white bg-opacity-20 rounded-2xl p-4 mb-6">
            <div id="current-time" class="text-4xl sm:text-6xl font-extrabold tracking-wide">00:00:00</div>
            <div id="current-date" class="text-lg sm:text-xl mt-2 opacity-90"></div>
        </div>

        <!-- 알림 메시지 영역 -->
        <div id="status-message" class="text-2xl sm:text-3xl font-bold h-12 flex items-center justify-center mb-6">
            <!-- 알림 메시지가 여기에 표시됩니다 -->
        </div>

        <!-- 방해금지 모드 토글 버튼 및 설명 -->
        <div class="bg-white bg-opacity-20 rounded-2xl p-4 flex items-center justify-between mb-4">
            <span class="text-lg font-semibold">방해금지 모드</span>
            <label for="dnd-toggle" class="relative inline-flex items-center cursor-pointer">
                <input type="checkbox" id="dnd-toggle" class="sr-only peer">
                <div class="w-14 h-8 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-7 after:w-7 after:transition-all peer-checked:bg-purple-600"></div>
            </label>
        </div>
        
        <!-- 방해금지 시간 설정 안내 -->
        <p id="dnd-info" class="text-sm opacity-80 mt-2">
            현재 방해금지 시간: 23:00 ~ 07:00
        </p>

        <!-- 메시지 박스 (alert 대신 사용) -->
        <div id="message-box" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden">
            <div class="bg-white text-gray-800 p-6 rounded-2xl shadow-xl max-w-sm w-full text-center">
                <h3 id="message-box-title" class="text-2xl font-bold mb-2"></h3>
                <p id="message-box-content" class="mb-4"></p>
                <button onclick="closeMessageBox()" class="bg-purple-600 text-white font-bold py-2 px-6 rounded-full transition-transform transform hover:scale-105">확인</button>
            </div>
        </div>
    </div>
    <script>
        // DOM 요소 가져오기
        const currentTimeEl = document.getElementById('current-time');
        const currentDateEl = document.getElementById('current-date');
        const statusMessageEl = document.getElementById('status-message');
        const dndToggle = document.getElementById('dnd-toggle');
        const messageBox = document.getElementById('message-box');
        const messageBoxTitle = document.getElementById('message-box-title');
        const messageBoxContent = document.getElementById('message-box-content');

        // 방해금지 모드 시간 설정 (23:00 ~ 07:00)
        const DND_START_HOUR = 23;
        const DND_END_HOUR = 7;
        let isDndActive = false;

        /**
         * 현재 시간을 업데이트하고, 수업 시작/종료 알림을 확인합니다.
         */
        function updateTime() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const day = ['일', '월', '화', '수', '목', '금', '토'][now.getDay()];
            const date = `${now.getFullYear()}년 ${now.getMonth() + 1}월 ${now.getDate()}일 ${day}요일`;

            const ampm = hours >= 12 ? '오후' : '오전';
            hours = hours % 12;
            hours = hours ? hours : 12;
            hours = String(hours).padStart(2, '0');
            
            currentTimeEl.textContent = `${ampm} ${hours}:${minutes}:${seconds}`;
            currentDateEl.textContent = date;

            const currentHour = now.getHours();
            if (currentHour >= DND_START_HOUR || currentHour < DND_END_HOUR) {
                isDndActive = true;
            } else {
                isDndActive = false;
            }

            if (dndToggle.checked) {
                isDndActive = true;
            }
            
            if (!isDndActive) {
                if (minutes === '00' && seconds === '00') {
                    showClassNotification('수업 시작!', '새로운 수업을 시작할 시간입니다.');
                } else if (minutes === '50' && seconds === '00') {
                    showClassNotification('수업 종료!', '잠깐의 휴식 시간을 즐기세요.');
                }
            }
        }

        /**
         * 방해금지 모드 상태에 따라 UI를 업데이트합니다.
         */
        function updateDndStatus() {
            const dndInfoEl = document.getElementById('dnd-info');
            const isDndEnabled = dndToggle.checked;
            
            if (isDndEnabled) {
                dndInfoEl.textContent = '방해금지 모드가 켜져 있습니다.';
                dndInfoEl.classList.add('text-red-300');
            } else {
                dndInfoEl.textContent = `현재 방해금지 시간: ${String(DND_START_HOUR).padStart(2, '0')}:00 ~ ${String(DND_END_HOUR).padStart(2, '0')}:00`;
                dndInfoEl.classList.remove('text-red-300');
            }
        }

        /**
         * 수업 알림 메시지를 표시합니다.
         * @param {string} title - 메시지 제목
         * @param {string} content - 메시지 내용
         */
        function showClassNotification(title, content) {
            statusMessageEl.textContent = title;
            statusMessageEl.classList.remove('animate-pulse');
            setTimeout(() => {
                statusMessageEl.textContent = '';
                statusMessageEl.classList.add('animate-pulse');
            }, 5000);
            
            showMessageBox(title, content);
        }

        /**
         * 커스텀 메시지 박스를 표시합니다.
         * @param {string} title - 제목
         * @param {string} content - 내용
         */
        function showMessageBox(title, content) {
            messageBoxTitle.textContent = title;
            messageBoxContent.textContent = content;
            messageBox.classList.remove('hidden');
        }

        /**
         * 커스텀 메시지 박스를 닫습니다.
         */
        function closeMessageBox() {
            messageBox.classList.add('hidden');
        }

        // 초기화 함수
        function initialize() {
            updateTime();
            updateDndStatus();
            setInterval(updateTime, 1000);
            dndToggle.addEventListener('change', updateDndStatus);
        }

        window.onload = initialize;
    </script>
</body>
</html>
